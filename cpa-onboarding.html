<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join Our CPA Network - CanadaAccountants</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .questionnaire-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e7ff;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 12.5%;
        }

        .step {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .step-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 0 auto 15px;
        }

        .step h2 {
            color: #1f2937;
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .step p {
            color: #6b7280;
            font-size: 1.1rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .option-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .option-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .option-card.selected {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .option-card.multi-select.selected {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .option-card h3 {
            color: #1f2937;
            font-size: 1.2rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option-card p {
            color: #6b7280;
            font-size: 0.95rem;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            margin: 30px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            border-color: #667eea;
        }

        .checkbox-item.selected {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .form-group {
            margin: 20px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #e5e7eb;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .ai-insight {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-left: 4px solid #0ea5e9;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .ai-insight h4 {
            color: #0369a1;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ai-insight p {
            color: #0c4a6e;
            font-size: 0.9rem;
        }

        .step-indicator {
            text-align: center;
            color: #6b7280;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .questionnaire-container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .checkbox-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçÅ Join as a Professional CPA</h1>
            <p>Connect with quality businesses across Canada and grow your practice</p>
        </div>

        <div class="questionnaire-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="step-indicator">
                <span id="currentStep">1</span> of 8 steps
            </div>

            <!-- Step 1: CPA Credentials -->
            <div class="step active" id="step1">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <h2>Professional Credentials</h2>
                    <p>Tell us about your CPA certification and professional background</p>
                </div>

                <div class="form-group">
                    <label for="fullName">Full Name *</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label for="licenseNumber">CPA License Number *</label>
                    <input type="text" id="licenseNumber" name="licenseNumber" required>
                </div>

                <div class="form-group">
                    <label for="province">Licensed Province/Territory *</label>
                    <select id="province" name="province" required>
                        <option value="">Select your province</option>
                        <option value="BC">British Columbia</option>
                        <option value="AB">Alberta</option>
                        <option value="SK">Saskatchewan</option>
                        <option value="MB">Manitoba</option>
                        <option value="ON">Ontario</option>
                        <option value="QC">Quebec</option>
                        <option value="NB">New Brunswick</option>
                        <option value="NS">Nova Scotia</option>
                        <option value="PE">Prince Edward Island</option>
                        <option value="NL">Newfoundland and Labrador</option>
                        <option value="YT">Yukon</option>
                        <option value="NT">Northwest Territories</option>
                        <option value="NU">Nunavut</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="yearsExperience">Years of Experience *</label>
                    <select id="yearsExperience" name="yearsExperience" required>
                        <option value="">Select experience level</option>
                        <option value="1-2">1-2 years</option>
                        <option value="3-5">3-5 years</option>
                        <option value="6-10">6-10 years</option>
                        <option value="11-15">11-15 years</option>
                        <option value="16-20">16-20 years</option>
                        <option value="20+">20+ years</option>
                    </select>
                </div>

                <div class="ai-insight">
                    <h4>ü§ñ AI Insight</h4>
                    <p>We verify all CPA credentials to ensure our clients connect with legitimate, qualified professionals.</p>
                </div>
            </div>

            <!-- Step 2: Practice Information -->
            <div class="step" id="step2">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <h2>Practice Information</h2>
                    <p>Help us understand your current practice setup</p>
                </div>

                <div class="options-grid">
                    <div class="option-card" data-value="solo">
                        <h3>üè¢ Solo Practice</h3>
                        <p>Independent CPA running your own practice</p>
                    </div>
                    <div class="option-card" data-value="small-firm">
                        <h3>üë• Small Firm (2-10 CPAs)</h3>
                        <p>Part of a small accounting firm</p>
                    </div>
                    <div class="option-card" data-value="medium-firm">
                        <h3>üè¢ Medium Firm (11-50 CPAs)</h3>
                        <p>Regional accounting firm</p>
                    </div>
                    <div class="option-card" data-value="large-firm">
                        <h3>üè¨ Large Firm (50+ CPAs)</h3>
                        <p>Major accounting firm</p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="firmName">Firm/Practice Name *</label>
                    <input type="text" id="firmName" name="firmName" required>
                </div>

                <div class="form-group">
                    <label for="practiceLocation">Primary Practice Location *</label>
                    <input type="text" id="practiceLocation" name="practiceLocation" placeholder="City, Province" required>
                </div>

                <div class="ai-insight">
                    <h4>üéØ Matching Insight</h4>
                    <p>Practice size helps us match you with businesses that fit your capacity and service model.</p>
                </div>
            </div>

            <!-- Step 3: Industry Specializations -->
            <div class="step" id="step3">
                <div class="step-header">
                    <div class="step-number">3</div>
                    <h2>Industry Specializations</h2>
                    <p>Which industries do you have expertise in? (Select all that apply)</p>
                </div>

                <div class="checkbox-grid">
                    <div class="checkbox-item multi-select" data-value="technology">
                        <input type="checkbox" name="industries" value="technology">
                        <span>üíª Technology & Software</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="healthcare">
                        <input type="checkbox" name="industries" value="healthcare">
                        <span>üè• Healthcare & Medical</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="retail">
                        <input type="checkbox" name="industries" value="retail">
                        <span>üõçÔ∏è Retail & E-commerce</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="construction">
                        <input type="checkbox" name="industries" value="construction">
                        <span>üèóÔ∏è Construction & Real Estate</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="manufacturing">
                        <input type="checkbox" name="industries" value="manufacturing">
                        <span>üè≠ Manufacturing</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="professional-services">
                        <input type="checkbox" name="industries" value="professional-services">
                        <span>üíº Professional Services</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="hospitality">
                        <input type="checkbox" name="industries" value="hospitality">
                        <span>üçΩÔ∏è Hospitality & Food Service</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="nonprofit">
                        <input type="checkbox" name="industries" value="nonprofit">
                        <span>ü§ù Non-Profit Organizations</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="agriculture">
                        <input type="checkbox" name="industries" value="agriculture">
                        <span>üåæ Agriculture & Farming</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="general">
                        <input type="checkbox" name="industries" value="general">
                        <span>üìä General Business (All Industries)</span>
                    </div>
                </div>

                <div class="ai-insight">
                    <h4>üéØ Smart Matching</h4>
                    <p>Industry expertise is our #1 matching factor. Businesses strongly prefer CPAs with relevant industry experience.</p>
                </div>
            </div>

            <!-- Step 4: Services Offered -->
            <div class="step" id="step4">
                <div class="step-header">
                    <div class="step-number">4</div>
                    <h2>Services You Offer</h2>
                    <p>What accounting services do you provide? (Select all that apply)</p>
                </div>

                <div class="checkbox-grid">
                    <div class="checkbox-item multi-select" data-value="bookkeeping">
                        <input type="checkbox" name="services" value="bookkeeping">
                        <span>üìö Bookkeeping & Monthly Accounting</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="tax-prep">
                        <input type="checkbox" name="services" value="tax-prep">
                        <span>üìã Tax Preparation & Filing</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="tax-planning">
                        <input type="checkbox" name="services" value="tax-planning">
                        <span>üéØ Tax Planning & Strategy</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="financial-statements">
                        <input type="checkbox" name="services" value="financial-statements">
                        <span>üìä Financial Statement Preparation</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="audit-review">
                        <input type="checkbox" name="services" value="audit-review">
                        <span>üîç Audit & Review Services</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="cfo-services">
                        <input type="checkbox" name="services" value="cfo-services">
                        <span>üíº CFO & Strategic Advisory</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="payroll">
                        <input type="checkbox" name="services" value="payroll">
                        <span>üí∞ Payroll Services</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="business-consulting">
                        <input type="checkbox" name="services" value="business-consulting">
                        <span>üöÄ Business Consulting</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="incorporation">
                        <input type="checkbox" name="services" value="incorporation">
                        <span>üè¢ Incorporation & Business Setup</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="quickbooks">
                        <input type="checkbox" name="services" value="quickbooks">
                        <span>üíª QuickBooks Setup & Training</span>
                    </div>
                </div>

                <div class="ai-insight">
                    <h4>üí° Service Matching</h4>
                    <p>Businesses often need multiple services. Offering comprehensive services increases your match opportunities.</p>
                </div>
            </div>

            <!-- Step 5: Client Size Preferences -->
            <div class="step" id="step5">
                <div class="step-header">
                    <div class="step-number">5</div>
                    <h2>Client Size Preferences</h2>
                    <p>What size businesses do you prefer to work with?</p>
                </div>

                <div class="checkbox-grid">
                    <div class="checkbox-item multi-select" data-value="startup">
                        <input type="checkbox" name="client-sizes" value="startup">
                        <span>üöÄ Startups & New Businesses (0-2 years)</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="micro">
                        <input type="checkbox" name="client-sizes" value="micro">
                        <span>üë§ Micro Businesses (1-4 employees)</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="small">
                        <input type="checkbox" name="client-sizes" value="small">
                        <span>üè™ Small Businesses (5-19 employees)</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="medium">
                        <input type="checkbox" name="client-sizes" value="medium">
                        <span>üè¢ Medium Businesses (20-99 employees)</span>
                    </div>
                    <div class="checkbox-item multi-select" data-value="large">
                        <input type="checkbox" name="client-sizes" value="large">
                        <span>üè¨ Large Businesses (100+ employees)</span>
                    </div>
                </div>

                <div class="options-grid">
                    <div class="option-card" data-value="under-100k">
                        <h3>üí∞ Under $100K Revenue</h3>
                        <p>Very small businesses and sole proprietors</p>
                    </div>
                    <div class="option-card" data-value="100k-500k">
                        <h3>üí∞ $100K - $500K Revenue</h3>
                        <p>Small growing businesses</p>
                    </div>
                    <div class="option-card" data-value="500k-2m">
                        <h3>üí∞ $500K - $2M Revenue</h3>
                        <p>Established small to medium businesses</p>
                    </div>
                    <div class="option-card" data-value="2m-10m">
                        <h3>üí∞ $2M - $10M Revenue</h3>
                        <p>Medium-sized enterprises</p>
                    </div>
                    <div class="option-card" data-value="10m-plus">
                        <h3>üí∞ $10M+ Revenue</h3>
                        <p>Large enterprises</p>
                    </div>
                </div>

                <div class="ai-insight">
                    <h4>üéØ Size Matching</h4>
                    <p>Client size preferences help us match you with businesses that fit your experience level and service capacity.</p>
                </div>
            </div>

            <!-- Step 6: Pricing & Availability -->
            <div class="step" id="step6">
                <div class="step-header">
                    <div class="step-number">6</div>
                    <h2>Pricing & Availability</h2>
                    <p>Help us understand your pricing structure and availability</p>
                </div>

                <div class="form-group">
                    <label>Typical Hourly Rate Range *</label>
                    <div class="options-grid">
                        <div class="option-card hourly-rate" data-value="under-100">
                            <h3>üí∞ Under $100/hour</h3>
                            <p>Entry-level or volume pricing</p>
                        </div>
                        <div class="option-card hourly-rate" data-value="100-150">
                            <h3>üí∞ $100-$150/hour</h3>
                            <p>Standard professional rates</p>
                        </div>
                        <div class="option-card hourly-rate" data-value="150-200">
                            <h3>üí∞ $150-$200/hour</h3>
                            <p>Experienced professional rates</p>
                        </div>
                        <div class="option-card hourly-rate" data-value="200-plus">
                            <h3>üí∞ $200+/hour</h3>
                            <p>Premium specialist rates</p>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Current Capacity for New Clients *</label>
                    <div class="options-grid">
                        <div class="option-card availability" data-value="immediate">
                            <h3>üöÄ Immediate Availability</h3>
                            <p>Can start new projects right away</p>
                        </div>
                        <div class="option-card availability" data-value="2-4-weeks">
                            <h3>üìÖ 2-4 Weeks</h3>
                            <p>Available for new clients soon</p>
                        </div>
                        <div class="option-card availability" data-value="1-3-months">
                            <h3>‚è≥ 1-3 Months</h3>
                            <p>Limited availability, waitlist</p>
                        </div>
                        <div class="option-card availability" data-value="not-available">
                            <h3>üîí Not Currently Available</h3>
                            <p>At capacity, future opportunities only</p>
                        </div>
                    </div>
                </div>

                <div class="ai-insight">
                    <h4>‚ö° Availability Matching</h4>
                    <p>We prioritize CPAs with immediate availability for businesses with urgent needs.</p>
                </div>
            </div>

            <!-- Step 7: Geographic Coverage -->
            <div class="step" id="step7">
                <div class="step-header">
                    <div class="step-number">7</div>
                    <h2>Geographic Coverage</h2>
                    <p>Where do you serve clients?</p>
                </div>

                <div class="options-grid">
                    <div class="option-card" data-value="local-only">
                        <h3>üè¢ Local Only</h3>
                        <p>In-person meetings preferred, local clients only</p>
                    </div>
                    <div class="option-card" data-value="regional">
                        <h3>üó∫Ô∏è Regional</h3>
                        <p>Serve clients within your province/territory</p>
                    </div>
                    <div class="option-card" data-value="canada-wide">
                        <h3>üá®üá¶ Canada-Wide</h3>
                        <p>Serve clients across Canada remotely</p>
                    </div>
                    <div class="option-card" data-value="hybrid">
                        <h3>üîÑ Hybrid</h3>
                        <p>Mix of local and remote clients</p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="serviceRadius">Service Area Details</label>
                    <textarea id="serviceRadius" name="serviceRadius" placeholder="Describe your geographic coverage (e.g., 'Greater Toronto Area', 'All of Alberta', 'Remote clients across Canada')"></textarea>
                </div>

                <div class="ai-insight">
                    <h4>üåç Geographic Matching</h4>
                    <p>Many businesses prefer local CPAs, while others are comfortable with remote relationships. We match based on preferences.</p>
                </div>
            </div>

            <!-- Step 8: Contact & Professional Info -->
            <div class="step" id="step8">
                <div class="step-header">
                    <div class="step-number">8</div>
                    <h2>Contact & Professional Information</h2>
                    <p>Final details to complete your professional profile</p>
                </div>

                <div class="form-group">
                    <label for="email">Professional Email *</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number *</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div class="form-group">
                    <label for="website">Website (Optional)</label>
                    <input type="url" id="website" name="website" placeholder="https://yourfirm.com">
                </div>

                <div class="form-group">
                    <label for="linkedIn">LinkedIn Profile (Optional)</label>
                    <input type="url" id="linkedIn" name="linkedIn" placeholder="https://linkedin.com/in/yourname">
                </div>

                <div class="form-group">
                    <label for="professionalBio">Professional Bio (Optional)</label>
                    <textarea id="professionalBio" name="professionalBio" placeholder="Brief description of your background, specializations, and what makes you unique..."></textarea>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="termsAccepted" name="termsAccepted" required style="margin-right: 10px;">
                        I agree to the Terms of Service and understand that my profile will be shared with potential clients *
                    </label>
                </div>

                <div class="ai-insight">
                    <h4>‚ú® Profile Quality</h4>
                    <p>Complete profiles with professional bios receive 3x more client inquiries than basic profiles.</p>
                </div>
            </div>

            <div class="navigation">
                <button type="button" class="btn btn-secondary" onclick="previousStep()" id="prevBtn" style="display: none;">Previous</button>
                <button type="button" class="btn btn-primary" onclick="nextStep()" id="nextBtn">Next Step</button>
                <button type="submit" class="btn btn-primary" onclick="submitForm()" id="submitBtn" style="display: none;">Join CPA Network</button>
            </div>
        </div>

        <div style="text-align: center; color: white; opacity: 0.8; margin-top: 20px;">
            <p>üîí Your information is secure and will only be shared with verified business clients</p>
        </div>
    </div>

    <script>
        let currentStepNum = 1;
        const totalSteps = 8;
        let answers = {};

        function updateProgress() {
            const progress = (currentStepNum / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('currentStep').textContent = currentStepNum;
        }

        function showStep(stepNum) {
            // Hide all steps
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show current step
            document.getElementById('step' + stepNum).classList.add('active');
            
            // Update navigation buttons
            document.getElementById('prevBtn').style.display = stepNum > 1 ? 'block' : 'none';
            document.getElementById('nextBtn').style.display = stepNum < totalSteps ? 'block' : 'none';
            document.getElementById('submitBtn').style.display = stepNum === totalSteps ? 'block' : 'none';
            
            updateProgress();
        }

        function nextStep() {
            if (validateCurrentStep()) {
                currentStepNum++;
                showStep(currentStepNum);
            }
        }

        function previousStep() {
            currentStepNum--;
            showStep(currentStepNum);
        }

        function validateCurrentStep() {
            const currentStep = document.getElementById('step' + currentStepNum);
            const requiredFields = currentStep.querySelectorAll('[required]');
            
            for (let field of requiredFields) {
                if (!field.value && field.type !== 'checkbox') {
                    field.focus();
                    alert('Please complete all required fields before proceeding.');
                    return false;
                }
                if (field.type === 'checkbox' && !field.checked) {
                    field.focus();
                    alert('Please accept the terms to continue.');
                    return false;
                }
            }
            
            // Check if at least one option is selected for option cards
            const optionCards = currentStep.querySelectorAll('.option-card');
            if (optionCards.length > 0) {
                const hasSelection = Array.from(optionCards).some(card => card.classList.contains('selected'));
                if (!hasSelection) {
                    alert('Please select an option before proceeding.');
                    return false;
                }
            }
            
            return true;
        }

        async function submitForm() {
            if (validateCurrentStep()) {
                // Collect all form data
                const formData = collectFormData();
                
                // Submit to Railway backend
        try {
            const response = await fetch('https://canadaaccountants-backend-production-1d8f.up.railway.app/api/cpa-registration', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            });
            
            if (response.ok) {
                alert('üéâ Thank you for joining our CPA network! We\'ll review your profile and contact you within 24 hours to get you set up for receiving quality client leads.');
            } else {
                throw new Error('Registration failed');
            }
        } catch (error) {
            console.error('Registration error:', error);
            alert('Sorry, there was an error submitting your registration. Please try again or contact support.');
        }
            }
        }

        function collectFormData() {
    const data = {};
    
    // Collect all form inputs
    document.querySelectorAll('input, select, textarea').forEach(field => {
        if (field.type === 'checkbox') {
            if (!data[field.name]) data[field.name] = [];
            if (field.checked) data[field.name].push(field.value);
        } else if (field.type === 'radio') {
            if (field.checked) data[field.name] = field.value;
        } else {
            data[field.name] = field.value;
        }
    });
    
    // Collect option card selections
    document.querySelectorAll('.option-card.selected').forEach(card => {
        const stepElement = card.closest('.step');
        const stepId = stepElement.id;
        if (!data[stepId]) data[stepId] = [];
        data[stepId].push(card.dataset.value);
    });
    
    // TRANSFORM DATA TO MATCH BACKEND EXPECTATIONS
    const transformedData = {
        // Split fullName into firstName and lastName
        firstName: data.fullName ? data.fullName.split(' ')[0] || '' : '',
        lastName: data.fullName ? data.fullName.split(' ').slice(1).join(' ') || '' : '',
        
        // Map direct fields
        email: data.email || '',
        phone: data.phone || '',
        cpaLicense: data.licenseNumber || '',
        province: data.province || '',
        experience: data.yearsExperience || '',
        firmSize: data.step2 ? data.step2[0] : '',
        
        // Map arrays to JSON strings
        services: JSON.stringify(data.services || []),
        industries: JSON.stringify(data.industries || []),
        
        // Map additional fields
        bio: data.professionalBio || '',
        hourlyRate: data.step6 ? data.step6[0] : '',
        availability: data.step6 ? data.step6[1] : '',
        
        // Add metadata
        selectedPlan: 'cpa-network',
        registrationType: '8-step-professional',
        firmName: data.firmName || '',
        practiceLocation: data.practiceLocation || '',
        website: data.website || '',
        linkedIn: data.linkedIn || '',
        
        // Geographic and client preferences
        geographicCoverage: data.step7 ? data.step7[0] : '',
        serviceRadius: data.serviceRadius || '',
        clientSizes: JSON.stringify(data['client-sizes'] || []),
        
        // Timestamp
        submissionTimestamp: new Date().toISOString()
    };
    
    return transformedData;
        }

        // Handle option card selections
        document.addEventListener('click', function(e) {
            if (e.target.closest('.option-card')) {
                const card = e.target.closest('.option-card');
                const questionCard = card.closest('.step');
                
                if (card.classList.contains('multi-select')) {
                    // Multiple selection allowed
                    card.classList.toggle('selected');
                } else {
                    // Single selection only
                    questionCard.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                }
            }
        });

        // Handle checkbox items
        document.addEventListener('click', function(e) {
            if (e.target.closest('.checkbox-item')) {
                const item = e.target.closest('.checkbox-item');
                const checkbox = item.querySelector('input[type="checkbox"]');
                
                if (e.target !== checkbox) {
                    checkbox.checked = !checkbox.checked;
                }
                
                if (checkbox.checked) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            }
        });
                function nextStep() {
            if (validateCurrentStep()) {
                currentStepNum++;
                showStep(currentStepNum);
            }
        }

                function previousStep() {
            currentStepNum--;
            showStep(currentStepNum);
        }

                function validateCurrentStep() {
            const currentStep = document.getElementById('step' + currentStepNum);
            const requiredFields = currentStep.querySelectorAll('[required]');
            
            for (let field of requiredFields) {
                if (!field.value && field.type !== 'checkbox') {
                    field.focus();
                    alert('Please complete all required fields before proceeding.');
                    return false;
                }
                if (field.type === 'checkbox' && !field.checked) {
                    field.focus();
                    alert('Please accept the terms to continue.');
                    return false;
                }
            }
            
            // Check if at least one option is selected for option cards
            const optionCards = currentStep.querySelectorAll('.option-card');
            if (optionCards.length > 0) {
                const hasSelection = Array.from(optionCards).some(card => card.classList.contains('selected'));
                if (!hasSelection) {
                    alert('Please select an option before proceeding.');
                    return false;
                }
            }
            
            return true;
        }
        // Initialize
        showStep(1);
    </script>
</body>
</html>
